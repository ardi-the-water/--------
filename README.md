# گزارش جامع پروژه حسابداری تپور (برای توسعه‌دهنده)

این مستند به عنوان یک گزارش جامع برای توسعه‌دهنده (Cline و علی خداکرمی) عمل می‌کند تا اهداف، وضعیت فعلی، تاریخچه تغییرات و نقشه راه آینده پروژه به سرعت قابل درک باشد.

## ۱. رسالت و فلسفه پروژه

**سیستم حسابداری تپور** یک اپلیکیشن حسابداری کامل، رایگان و سمت-کاربر (Client-Side) است که با هدف اصلی ارائه یک ابزار **سریع، آفلاین و ساده** برای مدیریت کسب‌وکارهای کوچک و محلی ساخته شده است.

- **تکنولوژی:** Vanilla HTML, CSS, JavaScript (بدون فریم‌ورک) برای اطمینان از حداکثر سرعت و حداقل وابستگی.
- **پایگاه داده:** IndexedDB، تمام داده‌ها به صورت امن در مرورگر کاربر ذخیره می‌شوند و نیازی به سرور یا اینترنت نیست.
- **اولویت اصلی:** عملکرد بر زیبایی مقدم است. طراحی باید سبک، کاربردی و در خدمت سرعت و پایداری باشد.

## ۲. لاگ توسعه و آخرین به‌روزرسانی‌ها (تیر ۱۴۰۴)

در این فاز از توسعه، تمرکز اصلی بر روی بهبود تجربه کاربری (UI/UX)، رفع باگ‌های کلیدی و افزودن قابلیت‌های درخواستی کاربر بوده است.

### الف) بهبودهای عملکردی و رفع اشکال:

- **خروجی اکسل فاکتورها:**
    - **گزارش دو-سطحی:** قابلیت خروجی اکسل ارتقا یافت. اکنون فایل اکسل شامل دو شیت مجزا است: یکی برای **خلاصه فاکتورها** (گزارش کلی) و دیگری برای **ریز اقلام سفارشات** که جزئیات هر کالا در هر فاکتور را نمایش می‌دهد.
    - **رفع باگ نام کالا:** مشکلی که باعث خالی بودن ستون "نام کالا" در خروجی اکسل می‌شد، با اصلاح منطق ذخیره‌سازی نام محصول در دیتابیس (`productName`) به طور کامل رفع شد.
- **حفظ تاریخ فاکتور:** باگ مهمی برطرف شد که در آن، تاریخ اصلی فاکتور هنگام ویرایش به تاریخ روز تغییر می‌کرد. اکنون تاریخ صدور اولیه فاکتورها در هنگام ویرایش حفظ می‌شود.
- **فرم ویرایش کالا:** مشکلی که باعث خالی بودن فرم هنگام ویرایش یک کالا می‌شد، با اصلاح نحوه پاس دادن `productId` به تابع `setupProductForm` برطرف گردید.
- **بهبود منطق پشتیبان‌گیری:** عملکرد بازیابی اطلاعات از فایل پشتیبان با افزودن قابلیت پاکسازی جداول قبل از درج اطلاعات جدید، بسیار قوی‌تر و قابل اعتمادتر شد.

### ب) بازطراحی و بهبود تجربه کاربری (UI/UX):

- **صفحه کالاها:**
    - **لیست کارتی:** لیست جدولی قدیمی با یک طراحی کارتی مدرن جایگزین شد که اطلاعات کلیدی هر کالا را به شکل بهتری نمایش می‌دهد.
    - **نشانگر موجودی:** کارت‌های کالا برای موجودی کم (کمتر از ۵) و ناموجود (صفر) دارای نشانگر رنگی مجزا هستند.
    - **فرم بازطراحی‌شده:** فرم افزودن/ویرایش کالا با چیدمان دو ستونی، منظم‌تر و کاربرپسندتر شد.
- **صفحه مشتریان:** فرم افزودن/ویرایش مشتریان نیز با گروه‌بندی منطقی فیلدها و چیدمان دو ستونی بازطراحی شد.
- **صفحه تنظیمات:** این صفحه برای دسترسی بهتر به دو بخش اصلی (اطلاعات فروشگاه و پشتیبان‌گیری) تقسیم و بازطراحی شد.
- **داشبورد:** یک بنر خوش‌آمدگویی پویا در بالای داشبورد اضافه شد که نام فروشگاه (ثبت‌شده در تنظیمات) را نمایش می‌دهد.
- **نسخه چاپی فاکتور:**
    - **قابلیت افزودن لوگو:** کاربر اکنون می‌تواند URL لوگوی خود را در تنظیمات وارد کند تا در نسخه چاپی فاکتور نمایش داده شود.
    - **بهبود ساختار:** ستون "ردیف" به جدول اقلام اضافه شد و چیدمان کلی برای خوانایی بیشتر بهینه شد.
    - **فوتر حرفه‌ای:** فوتر فاکتور با حذف آدرس لوکال‌هاست و افزودن پیام "سپاس از انتخاب شما" و اطلاعات توسعه‌دهنده، حرفه‌ای‌تر شد.

### ج) برندینگ و کپی‌رایتینگ:

- اطلاعات توسعه‌دهنده (علی خداکرمی به همراه لینک وب‌سایت) به صورت ثابت در منوی کناری برنامه و همچنین در صفحه تنظیمات و فوتر نسخه چاپی فاکتور اضافه شد.

## ۳. نقشه راه و مراحل بعدی

بر اساس اهداف اولیه پروژه، دو وظیفه اصلی برای آینده تعریف شده است:

- **انتشار آنلاین:** انتقال پروژه به GitHub Pages. این کار به کاربران اجازه می‌دهد تا بدون نیاز به دانلود، از طریق یک لینک اینترنتی به برنامه دسترسی داشته باشند و همیشه از آخرین نسخه استفاده کنند.
- **ابزار گزارش‌گیری پیشرفته:** ساخت یک ابزار جانبی (وب‌اپلیکیشن مجزا) که بتواند فایل‌های پشتیبان (`.json`) را تحلیل کرده و گزارش‌های مالی جامع (مانند سود و زیان در بازه‌های زمانی مختلف) را ارائه دهد.

## ۴. اطلاعات توسعه‌دهنده

- **توسعه‌دهنده اصلی:** علی خداکرمی ([mykh.ir](https://mykh.ir/))
- **دستیار هوش مصنوعی:** Cline
